(this["webpackJsonpidle-game"]=this["webpackJsonpidle-game"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/credit.7abc0ac4.svg"},function(e,t,a){e.exports=a.p+"static/media/land.787d1085.svg"},function(e,t,a){e.exports=a.p+"static/media/redcircle.5819b0ee.svg"},function(e,t,a){e.exports=a.p+"static/media/greencircle.3ea27515.svg"},function(e,t,a){e.exports=a.p+"static/media/bluecircle.3cc723b7.svg"},,function(e,t,a){e.exports=a(29)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),o=(a(20),a(6));a(21),a(22);var u=function(e){return r.a.createElement("div",{className:"Building-card"},r.a.createElement("span",null,e.building.displayName),r.a.createElement("br",null),r.a.createElement("span",null,e.building.growth.resource))},l=a(2);function s(e,t,a){var n,r=Object.fromEntries(a.map((function(e){return[e.resource,e.initial]}))),c=Object(l.a)(e);try{for(c.s();!(n=c.n()).done;){if(n.value===t){var i,o=Object(l.a)(a);try{for(o.s();!(i=o.n()).done;){var u=i.value;switch(u.type){case"exponential":r[u.resource]=u.roundToNearest*Math.floor(u.factor*r[u.resource]/u.roundToNearest)}}}catch(s){o.e(s)}finally{o.f()}}}}catch(s){c.e(s)}finally{c.f()}return r}var m=a(14),d=a(1),f=a(5),v=a(31);function b(e,t,a){switch(a.type){case"binomial":return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({},a.resource,e[a.resource]+Object(v.a)(t,a.p)()))}}function g(e,t){for(var a in t)if((t[a]||0)>e[a])return!1;return!0}function p(e,t){switch(t.type){case"assign":return t.newState;case"fastForward":var a=function(e,t){var a,n=e.resourceState,r=Object(l.a)(e.buildings);try{for(r.s();!(a=r.n()).done;){n=b(n,t,a.value.growth)}}catch(c){r.e(c)}finally{r.f()}return n}(e,t.count);return Object(d.a)(Object(d.a)({},e),{},{resourceState:a,lastUpdate:t.when});case"tryPurchaseBuilding":var n=s(e.buildings.map((function(e){return e.type})),t.building.type,t.building.cost);return g(e.resourceState,n)?Object(d.a)(Object(d.a)({},e),{},{resourceState:(r=e.resourceState,c=n,{score:(r.score||0)-(c.score||0)}),buildings:[].concat(Object(m.a)(e.buildings),[t.building])}):e}var r,c}a(23),a(24);var E=a(9),y=a.n(E),h=a(10),O=a.n(h),j=a(11),N=a.n(j),S=a(12),w=a.n(S),k=a(13),C=a.n(k);function T(e,t){return function(a){return void 0===a.amount?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"inline"},r.a.createElement("img",{src:e,className:"icon",alt:t}),r.a.createElement("div",{className:"quantity"},(n=a.amount)<1e10?n.toLocaleString():n.toExponential(3)));var n}}var B=T(y.a,"credits"),x=T(O.a,"land"),F=T(N.a,"redcircle"),P=T(w.a,"greencircle"),D=T(C.a,"bluecircle");a(25);var I=function(e){return r.a.createElement("div",{className:"Chart-container"},r.a.createElement("div",{className:"Chart-column"},r.a.createElement(B,{amount:e.resourceState.score}),r.a.createElement(x,{amount:0})),r.a.createElement("div",{className:"Chart-column"},r.a.createElement(F,{amount:0}),r.a.createElement(P,{amount:0}),r.a.createElement(D,{amount:0})))};var A=function(e){var t=s(e.buildings.map((function(e){return e.type})),e.building.type,e.building.cost),a=g(e.resources,t);return r.a.createElement("div",{className:"Button-card".concat(a?"":" Disabled"),onClick:a?e.onClick:void 0},r.a.createElement("h3",null,"Buy ".concat(e.building.displayName)),r.a.createElement(I,{resourceState:t}))},J=[{type:"building",active:!0,displayName:"Buildings"},{type:"buy",active:!1,displayName:"Buy"}];function L(e,t){return e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{active:e.type===t})}))}function U(e){var t,a=Object(l.a)(e.pageState);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.active)return e.pages[n.type]}}catch(c){a.e(c)}finally{a.f()}return r.a.createElement(r.a.Fragment,null)}a(26);var _=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Shroud".concat(e.active?" Active":""),onClick:e.onDismiss}),r.a.createElement("nav",{className:"Sidebar".concat(e.active?" Active":"")},e.pages.map((function(t,a){return r.a.createElement("span",{key:a,className:"Navlink".concat(t.active?" Active":""),onClick:function(){return e.onNavigate(t.type)}},t.displayName)}))))};a(27);var H=r.a.memo((function(e){var t=e.duration,a=e.onTick,c={animationDuration:"".concat(t,"ms")},i=Object(n.useRef)(null);return Object(n.useEffect)((function(){i.current&&i.current.classList.add("Progress-fill");var e=setInterval((function(){if(i.current){i.current.classList.remove("Progress-fill");i.current.offsetHeight;i.current.classList.add("Progress-fill")}a()}),t);return function(){return clearInterval(e)}})),r.a.createElement("div",{className:"Progress-bar"},r.a.createElement("div",{ref:i,style:c}))}),(function(e,t){return e.duration===t.duration}));a(28);var M=function(e){var t=e.msPerTick,a=e.onTick,n=e.resourceState;return r.a.createElement("header",{className:"Status-header"},r.a.createElement("div",{className:"row"},r.a.createElement("span",{id:"hamburger",onClick:e.onHamburgerClick},"hamburger"),r.a.createElement(I,{resourceState:n})),r.a.createElement(H,{duration:t,onTick:a}))},R=Object.fromEntries([{type:"basic",displayName:"Baseline",growth:{type:"binomial",resource:"score",p:1},cost:[{type:"exponential",resource:"score",initial:1,factor:2,roundToNearest:1}]}].map((function(e){return[e.type,e]})));var W=function(){var e=Object(n.useReducer)(p,{resourceState:{score:1},buildings:[],lastUpdate:null}),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useReducer)(L,J),l=Object(o.a)(i,2),s=l[0],m=l[1];Object(n.useEffect)((function(){var e=function(){var e=localStorage.getItem("saveFile");if(e){var t=JSON.parse(e);return(t.__version||0)<1?null:t}return null}();if(null!=e&&null!=e.lastUpdate){c({type:"assign",newState:e});var t=(new Date).getTime(),a=t-e.lastUpdate,n=Math.floor(a/5e3);c({type:"fastForward",count:n,when:t})}}),[]);var f=Object(n.useCallback)((function(){c({type:"fastForward",count:1,when:(new Date).getTime()})}),[]);Object(n.useEffect)((function(){var e;e=a,localStorage.setItem("saveFile",JSON.stringify(Object(d.a)(Object(d.a)({},e),{},{__version:1})))}),[a]);var v=Object(n.useCallback)((function(){c({type:"tryPurchaseBuilding",building:R.basic})}),[c]),b=Object(n.useState)(!1),g=Object(o.a)(b,2),E=g[0],y=g[1],h=Object(n.useCallback)((function(){y((function(e){return!e}))}),[y]);return r.a.createElement("div",{className:"App"},r.a.createElement(_,{pages:s,active:E,onDismiss:function(){return y(!1)},onNavigate:function(e){m(e),y(!1)}}),r.a.createElement("div",{className:"Col"},r.a.createElement(M,{onTick:f,onHamburgerClick:h,msPerTick:5e3,resourceState:a.resourceState}),r.a.createElement("div",{className:"Primary-container"},r.a.createElement(U,{pageState:s,pages:{building:r.a.createElement(r.a.Fragment,null,a.buildings.map((function(e,t){return r.a.createElement(u,{building:e,key:t})}))),buy:r.a.createElement(A,{onClick:v,building:R.basic,buildings:a.buildings,resources:a.resourceState})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.9fdc66b6.chunk.js.map